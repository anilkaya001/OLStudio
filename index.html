<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="description" content="Econometric research by AnÄ±l Kaya. Bayesian VAR models, Time Series Analysis, and Macroeconomic Forecasting.">
    <title>AnÄ±l Kaya | Econometric Insights</title>

    <!-- Preconnect to external resources -->
    <link rel="preconnect" href="https://polyfill.io" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>

    <!-- Critical CSS -->
    <style>
        :root {
            --bg-color: #050505;
            --text-color: #D4AF37;
            --accent-color: #F7E7CE;
            --dim-gold: #8a7326;
            --card-bg: #111111;
            --border-color: #333333;
            --font-main: 'Times New Roman', Times, serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
        }

        body, html {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: var(--font-main);
        }

        .hidden { display: none !important; pointer-events: none; }

        /* Navigation */
        #global-nav {
            position: fixed; top: 0; left: 0; width: 100%; padding: 1.5rem;
            display: flex; justify-content: space-between; align-items: center;
            z-index: 1000; mix-blend-mode: difference; pointer-events: none;
        }
        .home-btn {
            font-size: 1.2rem; font-weight: bold; text-transform: uppercase;
            letter-spacing: 3px; cursor: pointer; pointer-events: auto;
            color: var(--text-color); position: relative;
        }
        .home-btn::after {
            content: ''; position: absolute; bottom: -5px; left: 0; width: 0%;
            height: 1px; background: var(--text-color); transition: width 0.3s;
        }
        .home-btn:hover::after { width: 100%; }

        /* Canvas Background */
        canvas#econometric-canvas {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            z-index: 1; touch-action: none; /* Prevent scroll only on canvas */
        }

        /* Landing View */
        #view-landing {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 100;
            background: radial-gradient(circle at center, #1a1a1a 0%, #000000 85%);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: opacity 0.8s ease;
        }
        .landing-content {
            position: relative; z-index: 2; text-align: center; opacity: 0;
            animation: fadeIn 2s 0.5s forwards; pointer-events: none;
        }
        .landing-title {
            font-size: clamp(2.5rem, 8vw, 5rem); font-weight: 100;
            text-transform: uppercase; letter-spacing: clamp(0.2rem, 1vw, 0.8rem);
            margin-bottom: 0.5rem; color: #fff; text-shadow: 0 0 30px rgba(212, 175, 55, 0.4);
        }
        .landing-subtitle {
            font-size: clamp(0.9rem, 2vw, 1.2rem); font-style: italic;
            color: var(--text-color); letter-spacing: 2px; margin-bottom: 4rem;
        }
        .enter-btn {
            padding: 1.2rem 4rem; background: transparent; border: 1px solid var(--dim-gold);
            color: var(--text-color); font-family: var(--font-main); font-size: 0.9rem;
            text-transform: uppercase; letter-spacing: 3px; cursor: pointer; pointer-events: auto;
            transition: all 0.4s ease; backdrop-filter: blur(2px); position: relative; overflow: hidden;
        }
        .enter-btn::before {
            content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.2), transparent);
            transition: left 0.5s;
        }
        .enter-btn:hover {
            border-color: var(--text-color); box-shadow: 0 0 20px rgba(212, 175, 55, 0.2);
        }
        .enter-btn:hover::before { left: 100%; }

        /* Deck View (Archive) */
        #view-deck {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 50; padding-top: 8rem; overflow-y: auto;
            opacity: 0; transform: scale(0.95); filter: blur(10px);
            transition: all 0.8s ease; display: flex; flex-direction: column; align-items: center;
        }
        #view-deck.active { opacity: 1; transform: scale(1); filter: blur(0); }
        
        .deck-header { text-align: center; margin-bottom: 4rem; }
        .deck-title {
            font-size: 3rem; font-weight: 100; letter-spacing: 5px;
            background: linear-gradient(to bottom, #fff, var(--text-color));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }

        .card-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem; width: 100%; max-width: 1400px; padding: 0 4rem 4rem;
        }
        
        .article-card {
            background: linear-gradient(145deg, #111, #0a0a0a); border: 1px solid #222;
            padding: 3rem 2rem; min-height: 400px; display: flex; flex-direction: column;
            justify-content: space-between; cursor: pointer; position: relative;
            transition: all 0.5s ease; box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.5);
        }
        .article-card::after {
            content: ''; position: absolute; inset: 0; border: 1px solid var(--text-color);
            opacity: 0; transition: opacity 0.5s; pointer-events: none;
        }
        .article-card:hover {
            transform: translateY(-10px); box-shadow: 0 30px 60px -15px rgba(212, 175, 55, 0.1);
            border-color: transparent;
        }
        .article-card:hover::after { opacity: 0.5; }

        .card-num {
            font-size: 4rem; opacity: 0.1; font-weight: 900; 
            position: absolute; top: 1rem; right: 2rem;
        }
        .card-category {
            font-size: 0.7rem; text-transform: uppercase; letter-spacing: 2px;
            color: var(--dim-gold); margin-bottom: 2rem;
        }
        .card-title {
            font-size: 2rem; font-weight: 100; line-height: 1.2;
            color: var(--accent-color); margin-bottom: 1rem;
        }
        .card-excerpt {
            font-size: 0.95rem; color: #666; line-height: 1.6;
        }

        /* Reader View */
        #view-reader {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 60; background: var(--bg-color); overflow-y: scroll;
            opacity: 0; transform: translateY(50px); transition: opacity 0.6s ease, transform 0.6s ease;
        }
        #view-reader.active { opacity: 1; transform: translateY(0); }
        .reader-content-wrapper { max-width: 800px; margin: 8rem auto; padding: 0 2rem 5rem; }

        /* Typography for Dynamic Content */
        #article-content h1 { font-size: 2.8rem; color: var(--accent-color); margin-bottom: 1.5rem; }
        #article-content p { font-size: 19px; line-height: 1.8; color: #ccc; margin-bottom: 1.5rem; text-align: justify; }
        
        @keyframes fadeIn { to { opacity: 1; } }
        .loader {
            width: 40px; height: 40px; border: 2px solid var(--dim-gold);
            border-top-color: transparent; border-radius: 50%;
            animation: spin 0.8s linear infinite; margin: 5rem auto;
        }
        @keyframes spin { to { transform: rotate(360deg); } }

        @media (max-width: 768px) {
            .landing-title { font-size: 3rem; }
            .card-grid { padding: 2rem; grid-template-columns: 1fr; }
        }
    </style>
</head>

<body>
    <nav id="global-nav">
        <div class="home-btn" onclick="app.goHome()">AnÄ±l Kaya</div>
    </nav>

    <div id="app">
        <!-- Landing -->
        <div id="view-landing">
            <canvas id="econometric-canvas"></canvas>
            <div class="landing-content">
                <div class="landing-title">AnÄ±l Kaya</div>
                <div class="landing-subtitle">Econometrics </div>
                <button class="enter-btn" onclick="app.enterDeck()">Explore Research</button>
            </div>
        </div>

        <!-- Deck -->
        <div id="view-deck" class="hidden">
            <div class="deck-header">
                <h2 class="deck-title">The Archives</h2>
                <div style="width: 50px; height: 1px; background: var(--text-color); margin: 2rem auto;"></div>
            </div>
            <div class="card-grid" id="card-grid"></div>
        </div>

        <!-- Reader -->
        <div id="view-reader" class="hidden">
            <div id="article-content" class="reader-content-wrapper">
                <div class="loader"></div>
            </div>
        </div>
    </div>

    <!-- Deferred Scripts -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6" defer></script>
    <script id="MathJax-script" defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <script defer>
        const ARTICLE_MANIFEST = [
            { id: 'bvar', file: 'articles/bvar.html', category: 'Core Theory', title: 'Bayesian Vector Autoregression', excerpt: 'A complete guide to modern implementation, covering Minnesota priors, hierarchical estimation, and large-scale forecasting algorithms.', enabled: true },
            { id: 'stoch-vol', file: 'articles/stochastic-volatility.html', category: 'Time Variance', title: 'Stochastic Volatility', excerpt: 'Modeling structural breaks and changing error variance in post-pandemic macroeconomic data.', enabled: false },
            { id: 'sign-rest', file: 'articles/sign-restrictions.html', category: 'Identification', title: 'Sign Restrictions', excerpt: 'Moving beyond Cholesky: Set-identified structural shocks using robust Bayesian sampling methods.', enabled: false }
        ];

        // --- VISUAL SYSTEM: NEURAL RAIN ---
        const Visuals = {
            canvas: null,
            ctx: null,
            width: 0,
            height: 0,
            particles: [],
            pointer: { x: -1000, y: -1000, vx: 0, vy: 0, lastX: 0, lastY: 0 },
            
            formulas: [
                "ð‘¦â‚œ = ð›½ð‘¥â‚œ + ðœ–â‚œ", "Î£ = ð´â»Â¹Î›ð´â»Â¹â€²", "âˆ‡â„’(ðœƒ)", "ð‘ƒ(ð´|ðµ)", 
                "âˆ« ð‘’â»Ë£Â² ð‘‘ð‘¥", "ðœŽÂ²â‚œ", "Î”ð‘¦â‚œ", "ðœ– âˆ¼ ð‘(0,1)", "â„â‚€: ð›½ = 0", "ð¸[ð‘¦â‚œ|â„â‚œâ‚‹â‚]"
            ],

            init() {
                this.canvas = document.getElementById('econometric-canvas');
                this.ctx = this.canvas.getContext('2d', { alpha: false });
                this.resize();
                window.addEventListener('resize', () => this.resize());
                
                // Interaction Listeners (Physics only)
                const updatePointer = (x, y) => {
                    this.pointer.vx = x - this.pointer.lastX;
                    this.pointer.vy = y - this.pointer.lastY;
                    this.pointer.lastX = x; this.pointer.lastY = y;
                    this.pointer.x = x; this.pointer.y = y;
                };

                window.addEventListener('mousemove', e => updatePointer(e.clientX, e.clientY));
                window.addEventListener('touchmove', e => {
                    updatePointer(e.touches[0].clientX, e.touches[0].clientY);
                }, { passive: true });

                this.createParticles();
                this.animate();
            },

            resize() {
                const dpr = window.devicePixelRatio || 1;
                this.width = window.innerWidth;
                this.height = window.innerHeight;
                this.canvas.width = this.width * dpr;
                this.canvas.height = this.height * dpr;
                this.ctx.scale(dpr, dpr);
                this.createParticles();
            },

            createParticles() {
                this.particles = [];
                const count = this.width < 768 ? 40 : 80;
                for(let i=0; i<count; i++) {
                    this.particles.push({
                        x: Math.random() * this.width,
                        y: Math.random() * this.height,
                        vx: (Math.random() - 0.5) * 1.5,
                        vy: Math.random() * 1.5 + 0.5,
                        text: this.formulas[Math.floor(Math.random() * this.formulas.length)],
                        size: Math.random() * 12 + 10,
                        alpha: Math.random() * 0.5 + 0.1
                    });
                }
            },

            animate() {
                this.ctx.fillStyle = '#050505';
                this.ctx.fillRect(0, 0, this.width, this.height);
                this.ctx.lineWidth = 0.5;

                for (let i = 0; i < this.particles.length; i++) {
                    let p1 = this.particles[i];
                    p1.x += p1.vx;
                    p1.y += p1.vy;

                    // Physics Interaction
                    const dx = p1.x - this.pointer.x;
                    const dy = p1.y - this.pointer.y;
                    const dist = Math.sqrt(dx*dx + dy*dy);
                    const interactionRadius = 250;

                    if (dist < interactionRadius) {
                        const force = (interactionRadius - dist) / interactionRadius;
                        const angle = Math.atan2(dy, dx);
                        p1.vx += Math.cos(angle) * force * 0.5;
                        p1.vy += Math.sin(angle) * force * 0.5;
                        p1.vx += this.pointer.vx * 0.05 * force;
                        p1.vy += this.pointer.vy * 0.05 * force;
                    }

                    p1.vx *= 0.98;
                    if(p1.vy < 0.5 && p1.vy > -0.5) p1.vy += 0.05;
                    p1.vy = Math.min(Math.max(p1.vy, -3), 3);

                    if (p1.x < -50) p1.x = this.width + 50;
                    if (p1.x > this.width + 50) p1.x = -50;
                    if (p1.y > this.height + 50) p1.y = -50;
                    if (p1.y < -50) p1.y = this.height + 50;

                    // Neural Connections
                    for (let j = i + 1; j < this.particles.length; j++) {
                        let p2 = this.particles[j];
                        const dxC = p1.x - p2.x;
                        const dyC = p1.y - p2.y;
                        const distC = Math.sqrt(dxC*dxC + dyC*dyC);
                        if (distC < 120) {
                            const alpha = 1 - (distC / 120);
                            this.ctx.strokeStyle = `rgba(212, 175, 55, ${alpha * 0.15})`;
                            this.ctx.beginPath();
                            this.ctx.moveTo(p1.x, p1.y);
                            this.ctx.lineTo(p2.x, p2.y);
                            this.ctx.stroke();
                        }
                    }

                    // Render Formula
                    this.ctx.font = `italic ${p1.size}px "Times New Roman"`;
                    this.ctx.fillStyle = `rgba(212, 175, 55, ${p1.alpha})`;
                    this.ctx.fillText(p1.text, p1.x, p1.y);
                }

                this.pointer.vx *= 0.9;
                this.pointer.vy *= 0.9;
                requestAnimationFrame(() => this.animate());
            }
        };

        // --- APP LOGIC ---
        const app = {
            state: { view: 'landing' },
            init() {
                Visuals.init();
                this.renderCards();
            },
            renderCards() {
                // Using the specific HTML structure you preferred for correct rendering
                document.getElementById('card-grid').innerHTML = ARTICLE_MANIFEST.map((article, index) => `
                    <div class="article-card" 
                         style="${!article.enabled ? 'opacity: 0.3; pointer-events: none;' : ''}"
                         onclick="${article.enabled ? `app.openArticle('${article.id}')` : ''}">
                        <div class="card-num">${String(index + 1).padStart(2, '0')}</div>
                        <div>
                            <div class="card-category">${article.category}</div>
                            <div class="card-title">${article.title}</div>
                        </div>
                        <div class="card-excerpt">${article.excerpt}</div>
                    </div>
                `).join('');
            },
            enterDeck() {
                this.switchView('landing', 'deck');
            },
            goHome() {
                if(this.state.view !== 'landing') this.switchView(this.state.view, 'landing');
            },
            switchView(from, to) {
                const fromEl = document.getElementById('view-'+from);
                const toEl = document.getElementById('view-'+to);
                fromEl.classList.remove('active');
                setTimeout(() => {
                    fromEl.classList.add('hidden');
                    toEl.classList.remove('hidden');
                    void toEl.offsetWidth; 
                    toEl.classList.add('active');
                }, 600);
                this.state.view = to;
            },
            async openArticle(id) {
                this.switchView('deck', 'reader');
                const container = document.getElementById('article-content');
                const article = ARTICLE_MANIFEST.find(a => a.id === id);
                container.innerHTML = '<div class="loader"></div>';
                try {
                    const res = await fetch(article.file);
                    if(!res.ok) throw new Error();
                    const text = await res.text();
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(text, 'text/html');
                    container.innerHTML = doc.querySelector('article')?.innerHTML || text;
                    if(window.MathJax) MathJax.typesetPromise([container]);
                } catch(e) { container.innerHTML = '<p style="text-align:center">Content unavailable.</p>'; }
            }
        };

        document.addEventListener('DOMContentLoaded', () => app.init());
    </script>
</body>
</html>
