<!doctype html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <meta name="theme-color" content="#050505" />

  <title>Nash Equilibrium Active Risk Optimization | Technical Note</title>
  <meta name="description" content="A game theoretic Nash equilibrium portfolio optimizer for active management." />

  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sugina-dev/latin-modern-web@1.0.1/style/latinmodern-roman.css" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sugina-dev/latin-modern-web@1.0.1/style/latinmodern-sans.css" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" crossorigin="anonymous"></script>

  <style>
    :root {
      color-scheme: dark;
      --font-main: "Latin Modern Roman", serif;
      --font-ui: "Latin Modern Sans", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      --safe-top: env(safe-area-inset-top, 0px);
      --safe-bottom: env(safe-area-inset-bottom, 0px);
      --nav-h: 64px;
      
      /* Dark Theme Variables */
      --bg: #050505;
      --border: rgba(255,255,255,0.10);
      --silver: #e8e8ea;
      --silver-dim: rgba(232,232,234,0.72);
      --gold: #D4AF37;
      --gold-soft: #F7E7CE;
      --glass-bg: linear-gradient(135deg, rgba(255,255,255,0.03) 0%, rgba(212,175,55,0.02) 100%);
      
      --maxw: 1080px;
      --mouse-x: 50%;
      --mouse-y: 50%;
    }

    /* Light Theme Variables */
    [data-theme="light"] {
      color-scheme: light;
      --bg: #f4f4f6;
      --border: rgba(0,0,0,0.12);
      --silver: #1a1a1a;
      --silver-dim: rgba(26,26,26,0.78);
      --gold: #b8860b;
      --gold-soft: #856404;
      --glass-bg: linear-gradient(135deg, rgba(255,255,255,0.7) 0%, rgba(255,255,255,0.4) 100%);
    }

    html, body { height: 100%; }
    body {
      margin: 0;
      background: var(--bg);
      color: var(--silver);
      font-family: var(--font-main) !important;
      overflow-x: hidden;
      -webkit-font-smoothing: antialiased;
      transition: background 0.3s ease, color 0.3s ease;
    }

    a { color: var(--gold-soft); text-decoration: none; }
    a:hover { opacity: 0.92; text-decoration: underline; }
    code {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
      background: rgba(128,128,128,0.15);
      padding: 2px 5px;
      border-radius: 3px;
      font-size: 0.92em;
    }

    .ambient {
      position: fixed; inset: 0;
      pointer-events: none;
      background:
        radial-gradient(1200px 600px at 20% 30%, rgba(212,175,55,0.12), rgba(0,0,0,0) 60%),
        radial-gradient(900px 520px at 82% 70%, rgba(232,232,234,0.08), rgba(0,0,0,0) 58%),
        linear-gradient(135deg, rgba(10,10,10,0.88), rgba(18,18,18,0.58));
      z-index: 0;
      transition: all 0.5s ease;
    }

    [data-theme="light"] .ambient {
      background:
        radial-gradient(1200px 600px at 20% 30%, rgba(212,175,55,0.15), rgba(255,255,255,0) 60%),
        radial-gradient(900px 520px at 82% 70%, rgba(0,0,0,0.03), rgba(255,255,255,0) 58%),
        linear-gradient(135deg, rgba(240,240,245,0.88), rgba(220,220,230,0.58));
    }

    nav {
      position: fixed; top: 0; left: 0; right: 0;
      height: calc(var(--nav-h) + var(--safe-top));
      padding-top: var(--safe-top);
      padding-left: clamp(14px, 4vw, 44px);
      padding-right: clamp(14px, 4vw, 44px);
      display: flex; align-items: center; justify-content: space-between;
      z-index: 1000;
      border-bottom: 1px solid var(--border);
      background:
        radial-gradient(1200px 600px at 20% 30%, rgba(212,175,55,0.11), rgba(0,0,0,0) 60%),
        linear-gradient(135deg, rgba(10,10,10,0.82), rgba(18,18,18,0.60));
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      transition: background 0.3s ease, border-color 0.3s ease;
    }

    [data-theme="light"] nav {
      background:
        radial-gradient(1200px 600px at 20% 30%, rgba(212,175,55,0.08), rgba(255,255,255,0) 60%),
        linear-gradient(135deg, rgba(250,250,255,0.82), rgba(240,240,245,0.60));
    }

    #brand {
      appearance: none; border: none; background: transparent;
      font-family: var(--font-ui) !important;
      font-size: 0.92rem;
      font-weight: 900;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: color-mix(in oklab, var(--gold) 70%, var(--silver));
      user-select: none;
      cursor: pointer;
      padding: 0;
    }

    #actions { display: flex; align-items: center; gap: 10px; }
    
    .btn {
      font-family: var(--font-ui) !important;
      font-size: 0.75rem;
      letter-spacing: 1px;
      text-transform: uppercase;
      padding: 8px 12px;
      border-radius: 12px;
      border: 1px solid rgba(212,175,55,0.25);
      background: linear-gradient(135deg, rgba(18,18,18,0.58), rgba(18,18,18,0.34));
      color: var(--silver);
      cursor: pointer;
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      transition: all 0.22s ease;
      min-height: 38px;
      display: flex; align-items: center; justify-content: center;
    }
    .btn:hover {
      background: rgba(212,175,55,0.14);
      border-color: rgba(212,175,55,0.52);
    }
    
    [data-theme="light"] .btn {
      background: linear-gradient(135deg, rgba(255,255,255,0.8), rgba(255,255,255,0.4));
      border-color: rgba(0,0,0,0.1);
      color: #333;
    }
    [data-theme="light"] .btn:hover {
      background: rgba(212,175,55,0.1);
      border-color: rgba(212,175,55,0.4);
    }

    main {
      position: relative;
      z-index: 2;
      padding-top: calc(var(--nav-h) + var(--safe-top) + 26px);
      padding-bottom: calc(40px + var(--safe-bottom));
      padding-left: clamp(16px, 5vw, 60px);
      padding-right: clamp(16px, 5vw, 60px);
    }

    .wrap {
      max-width: var(--maxw);
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: 18px;
    }

    .glass {
      background:
        radial-gradient(circle at var(--mouse-x) var(--mouse-y),
          rgba(255,255,255,0.03) 0%,
          rgba(255,255,255,0.012) 48%,
          rgba(0,0,0,0.0) 100%),
        var(--glass-bg);
      border: 1px solid var(--border);
      border-top: 1px solid color-mix(in oklab, var(--border) 150%, white);
      border-left: 1px solid color-mix(in oklab, var(--border) 120%, white);
      border-radius: 14px;
      padding: 26px 36px;
      box-shadow: 0 10px 34px rgba(0,0,0,0.15);
      backdrop-filter: blur(24px);
      -webkit-backdrop-filter: blur(24px);
      position: relative;
      overflow: hidden;
      transition: background 0.3s ease, border-color 0.3s ease, color 0.3s ease;
    }
    .glass::after {
      content: "";
      position: absolute; inset: 0;
      background: radial-gradient(650px circle at var(--mouse-x) var(--mouse-y), rgba(212,175,55,0.08), transparent 42%);
      opacity: 0;
      transition: opacity 0.26s ease;
      pointer-events: none;
    }
    .glass:hover::after { opacity: 1; }

    header h1 {
      margin: 0;
      font-size: clamp(1.95rem, 4.0vw, 2.95rem);
      line-height: 1.08;
      color: color-mix(in oklab, var(--gold-soft) 66%, var(--silver));
      letter-spacing: 0.2px;
    }

    /* Aesthetically Perfect Read More Component */
    .abstract-container {
      position: relative;
      margin-top: 18px;
    }
    
    .abstract-text {
      font-family: var(--font-ui) !important;
      font-size: 0.92rem;
      line-height: 1.7;
      color: color-mix(in oklab, var(--silver) 75%, transparent);
      max-width: 90ch;
      transition: all 0.5s cubic-bezier(0.25, 1, 0.5, 1);
    }
    
    .abstract-container:not(.expanded) .abstract-text {
      display: -webkit-box;
      -webkit-line-clamp: 4;
      -webkit-box-orient: vertical;
      overflow: hidden;
      mask-image: linear-gradient(to bottom, black 40%, transparent 100%);
      -webkit-mask-image: linear-gradient(to bottom, black 40%, transparent 100%);
    }

    .expand-btn-wrapper {
      display: flex;
      justify-content: flex-start;
      margin-top: -12px;
      position: relative;
      z-index: 10;
      opacity: 1;
    }
    
    .abstract-container.expanded .expand-btn-wrapper {
      margin-top: 20px;
    }

    .expand-btn {
      background: var(--bg);
      border: 1px solid color-mix(in oklab, var(--gold) 35%, transparent);
      border-radius: 30px;
      color: var(--gold);
      font-family: var(--font-ui) !important;
      font-size: 0.75rem;
      font-weight: 800;
      letter-spacing: 1px;
      text-transform: uppercase;
      cursor: pointer;
      padding: 8px 20px;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      transition: all 0.3s cubic-bezier(0.25, 1, 0.5, 1);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    
    .expand-btn:hover {
      background: var(--gold);
      color: #000;
      border-color: var(--gold);
      transform: translateY(-2px);
      box-shadow: 0 8px 20px color-mix(in oklab, var(--gold) 35%, transparent);
    }
    
    .expand-btn svg {
      width: 16px; height: 16px;
      transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      stroke: currentColor;
    }
    
    .abstract-container.expanded .expand-btn svg {
      transform: rotate(180deg);
    }

    .article {
      font-size: 1.15rem;
      line-height: 1.85;
      color: color-mix(in oklab, var(--silver) 92%, var(--silver-dim));
      text-align: justify;
      text-justify: inter-word;
    }
    .article h2 {
      margin: 3.2rem 0 1.2rem 0;
      font-family: var(--font-ui) !important;
      font-size: 1rem;
      letter-spacing: 1.3px;
      text-transform: uppercase;
      color: color-mix(in oklab, var(--gold) 62%, var(--silver));
      border-left: 3px solid var(--gold);
      padding-left: 14px;
    }
    .article h3 {
      margin: 2.2rem 0 0.8rem 0;
      font-family: var(--font-main) !important;
      font-size: 1.35rem;
      font-style: italic;
      color: color-mix(in oklab, var(--gold-soft) 55%, var(--silver));
    }
    .article p { margin: 0 0 1.5rem 0; }
    .article ul, .article ol { margin: 0 0 1.5rem 0; padding-left: 22px; }
    .article li { margin: 0.6rem 0; }

    .eq {
      margin: 1.8rem 0;
      padding: 22px 22px;
      border-radius: 12px;
      border: 1px solid rgba(128,128,128,0.15);
      background: rgba(0,0,0,0.22);
      overflow-x: auto;
      color: var(--silver);
      font-size: 1.05rem;
    }
    [data-theme="light"] .eq { background: rgba(0,0,0,0.03); }
    
    .eq-title {
      font-family: var(--font-ui) !important;
      font-size: 0.78rem;
      letter-spacing: 1.1px;
      text-transform: uppercase;
      color: var(--gold);
      margin-bottom: 10px;
    }

    .proof {
      margin: 1.8rem 0;
      padding: 24px 24px;
      border-radius: 12px;
      border-left: 4px solid var(--gold);
      background: rgba(212,175,55,0.04);
      position: relative;
    }
    [data-theme="light"] .proof { background: rgba(212,175,55,0.08); }
    
    .proof-label {
      font-family: var(--font-ui) !important;
      font-size: 0.8rem;
      letter-spacing: 1.2px;
      text-transform: uppercase;
      color: var(--gold);
      font-weight: 700;
      margin-bottom: 10px;
    }

    .policy-box {
      margin: 1.8rem 0;
      padding: 22px 22px;
      border-radius: 12px;
      border: 1px solid rgba(122,166,255,0.25);
      background: linear-gradient(135deg, rgba(10,20,40,0.5), rgba(5,10,20,0.7));
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    [data-theme="light"] .policy-box {
      background: linear-gradient(135deg, rgba(240,245,255,0.8), rgba(230,238,255,0.9));
      border-color: rgba(0,80,255,0.15);
    }

    .policy-box h4 {
      font-family: var(--font-ui) !important;
      font-size: 0.82rem;
      letter-spacing: 1.2px;
      text-transform: uppercase;
      color: #7aa6ff;
      margin: 0 0 12px 0;
    }
    [data-theme="light"] .policy-box h4 { color: #0056b3; }
    
    .policy-box ul {
      margin: 0; padding-left: 18px;
      color: rgba(179,209,255,0.88);
      font-size: 1.05rem;
      line-height: 1.7;
    }
    [data-theme="light"] .policy-box ul { color: #333; }

    .refs {
      font-family: var(--font-ui) !important;
      font-size: 0.88rem;
      line-height: 1.7;
      color: color-mix(in oklab, var(--silver) 68%, transparent);
    }
    .refs ol { margin: 0; padding-left: 20px; }
    .refs li { margin: 0.75rem 0; }

    footer {
      margin-top: 8px;
      padding-top: 18px;
      border-top: 1px solid var(--border);
      font-family: var(--font-ui) !important;
      font-size: 0.8rem;
      color: color-mix(in oklab, var(--silver) 58%, transparent);
      text-align: center;
    }

    @media (prefers-reduced-motion: reduce) {
      .btn, .glass::after, body, nav, .glass, .expand-btn, .expand-btn svg, .ambient { transition: none !important; }
    }

    @media (max-width: 760px) {
      .glass { padding: 20px 18px; }
      .article { font-size: 1.02rem; }
    }
  </style>
</head>

<body>
  <div class="ambient" aria-hidden="true"></div>

  <nav aria-label="Primary">
    <button id="brand" type="button" aria-label="Back to index">Anıl Kaya</button>
    <div id="actions">
      <a class="btn" href="#">Home</a>
      <button class="btn" id="theme" type="button" aria-pressed="false" aria-label="Toggle theme">Light</button>
    </div>
  </nav>

  <main>
    <div class="wrap">

      <section class="glass" aria-label="Header">
        <header>
          <h1>Nash Equilibrium Portfolio Optimization</h1>
          
          <div class="abstract-container" id="abstractContainer">
            <div class="abstract-text">
              <strong>Note</strong> This is definitely not financial advice. I decided to build an active equity strategy balancing BIST names against a benchmark on a monthly basis. The whole thing is built to be extremely difficult to fool. You see most people try to maximize the Information Ratio directly. The problem is that this approach relies on ratios and lacks convexity. It usually just pushes you into corner solutions because of estimation noise. I decided to replace that fragile setup with a two player zero sum game. One player is the investor picking weights and the other is an adversary messing with expected returns to simulate drift uncertainty. We can find a saddle point for this game under standard conditions. This point acts as a Nash equilibrium. Every month it simplifies down into a nice stable quadratic program. I used exponentially weighted moving averages for the moment estimates. This keeps the focus squarely on recent market regimes. The covariance matrix gets regularized through shrinkage so the optimizer does not blow up on us. For validation I relied on a walk forward evaluation. This includes an embargo day along with turnover costs and diagnostics that account for selection bias like PSR and DSR. Finally I wrapped it all in stationary bootstrap uncertainty bands.
            </div>
            <div class="expand-btn-wrapper">
              <button class="expand-btn" id="expandBtn" aria-expanded="false" aria-controls="abstractContainer">
                <span class="btn-text">Read Full Abstract</span>
                <svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M19 9l-7 7-7-7"></path></svg>
              </button>
            </div>
          </div>
        </header>
      </section>

      <section class="glass article" aria-label="Article content">

        <h2>1. Problem Setup</h2>

        <p>
          Let us define \(P_{t,i}\) as the adjusted price of an asset \(i\) on a given trading day \(t\). We also need \(B_t\) to represent the benchmark price level. From there we can calculate simple returns. The asset return is \(r_{t,i} = P_{t,i}/P_{t-1,i} - 1\). The benchmark return is \(b_t = B_t/B_{t-1} - 1\). Our primary focus naturally falls on active returns.
        </p>

        <div class="eq">
          <div class="eq-title">Definition 1 Active returns</div>
          \[
            A_{t,i} \equiv r_{t,i} - b_t,\qquad
            a_t(w) \equiv \sum_{i=1}^{N} w_i\,A_{t,i}.
          \]
          <p style="margin:10px 0 0 0; font-size:0.95rem; opacity:0.8; font-family: var(--font-ui) !important;">
            Here \(w\in\mathbb{R}^N\) represents our portfolio weights. The active return of the portfolio at time \(t\) is \(a_t(w)\). We naturally define the active return of the benchmark as zero.
          </p>
        </div>

        <p>
          The Information Ratio serves as a benchmark relative version of the Sharpe ratio. You simply divide the expected active return by the tracking error. Tracking error is just the standard deviation of those active returns. Industry professionals use this metric constantly for active risk management and performance evaluation.
        </p>

        <div class="eq">
          <div class="eq-title">Definition 2 Tracking error and Information Ratio</div>
          \[
            \mathrm{TE}(w) = \sqrt{\mathrm{Var}\big(a_t(w)\big)},\qquad
            \mathrm{IR}(w) = \frac{\mathbb{E}[a_t(w)]}{\mathrm{TE}(w)}.
          \]
          <p style="margin:10px 0 0 0; font-size:0.95rem; opacity:0.8; font-family: var(--font-ui) !important;">
            In practice we compute tracking error as the standard deviation of relative returns over a specific window. Everyone in the industry accepts this active risk definition.
          </p>
        </div>

        <h2>2. The Danger of Naively Maximizing the Information Ratio</h2>

        <p>
          Trying to directly maximize the ratio \(\mathrm{IR}(w)=\mu(w)/\sigma(w)\) usually ends badly. The problem is definitely not convex. It is also incredibly sensitive to estimation noise. Sometimes sampling artifacts cause the denominator \(\hat{\sigma}(w)\) to shrink. When that happens the entire ratio spikes artificially. This pulls the optimizer right into highly unstable allocations. Even worse the optimizer might discover a completely fake performance edge by overfitting the lookback window. We see this classic backtest pathology all the time.
        </p>

        <div class="proof">
          <div class="proof-label">Observation on ratio fragility</div>
          <p style="margin:0;">
            These objectives easily fall apart due to noise in either the numerator or the denominator. Mean estimation error ruins the top part while tracking error estimation ruins the bottom. The denominator acts particularly treacherous in finite samples. It relies heavily on covariance estimates. Portfolio optimization inherently amplifies errors in those exact estimates.
          </p>
        </div>

        <p>
          Therefore our goal moves away from just maximizing a pretty statistic. We instead need to choose a portfolio rule that rests on solid mathematical foundations. It must remain robust against estimation errors. The validation method also needs to strictly resist any data leakage.
        </p>

        <h2>3. The Core Idea with a Drift Adversary Game</h2>

        <p>
          I prefer to treat expected active returns as highly uncertain quantities. We calculate estimates for the mean \(\hat{\mu}_t\) and covariance \(\hat{\Sigma}_t\) from a trailing window at every rebalance time \(t\). However I refuse to blindly trust that mean estimate. Instead I introduce a theoretical adversary allowed to perturb the mean by a vector \(\delta\). This adversary faces a penalty through a quadratic form scaling with the covariance matrix. The setup creates a fascinating two player zero sum game.
        </p>

        <div class="eq">
          <div class="eq-title">Equation 1 Minimax formulation</div>
          \[
          \max_{w\in\mathcal{W}}\,\min_{\delta\in\mathbb{R}^N}\;
          (\hat{\mu}_t+\delta)^\top w
          -\frac{\gamma}{2}\,w^\top \hat{\Sigma}_t w
          +\frac{\eta}{2}\,\delta^\top \hat{\Sigma}_t^{-1}\delta
          -\tau\|w\|_2^2.
          \]
          <p style="margin:10px 0 0 0; font-size:0.95rem; opacity:0.8; font-family: var(--font-ui) !important;">
            Here \(\gamma\) represents your risk aversion and acts as an active risk penalty. The variable \(\eta\) determines your robustness strength. A smaller value creates a stronger adversary. Finally \(\tau\) provides regularization to avoid asset concentration.
          </p>
        </div>

        <div class="proof">
          <div class="proof-label">Proposition 1 about the Saddle Point</div>
          <p style="margin:0;">
            We assume standard conditions where the function is concave in \(w\) and convex in \(\delta\) over a convex feasible set \(\mathcal{W}\). A minimax saddle point exists naturally under these rules. This point perfectly coincides with the Nash equilibrium of our zero sum game. That specific mathematical property gives us the right to claim a Nash equilibrium at every single rebalance.
          </p>
        </div>

        <h3>3.1 Finding a Closed Form Adversary</h3>

        <p>
          Notice how the inner minimization is purely quadratic with respect to \(\delta\). This means the best response of the adversary has an explicit mathematical form. You simply take the derivative with respect to \(\delta\) and set it equal to zero.
        </p>

        <div class="eq">
          <div class="eq-title">Equation 2 Adversary best response</div>
          \[
            \nabla_\delta\Big(\delta^\top w + \frac{\eta}{2}\delta^\top\hat{\Sigma}_t^{-1}\delta\Big)=0
            \;\;\Rightarrow\;\;
            \delta^\star(w) = -\frac{1}{\eta}\hat{\Sigma}_t w.
          \]
        </div>

        <p>
          We then plug the optimal \(\delta^\star(w)\) back into the main objective. The entire game collapses beautifully into a single concave maximization problem.
        </p>

        <div class="eq">
          <div class="eq-title">Equation 3 Reduced Nash objective</div>
          \[
          w_t^\star=\arg\max_{w\in\mathcal{W}}\;
          \hat{\mu}_t^\top w
          -\frac{1}{2}\Big(\gamma + \frac{1}{\eta}\Big)\,w^\top\hat{\Sigma}_t w
          -\tau\|w\|_2^2.
          \]
          <p style="margin:10px 0 0 0; font-size:0.95rem; opacity:0.8; font-family: var(--font-ui) !important;">
            The robustness term \(\eta^{-1}\) effectively adds extra curvature to our risk penalty. This simple addition makes the optimizer substantially more conservative whenever the covariance gets large.
          </p>
        </div>

        <h2>4. Estimation Using Moving Averages and Shrinkage</h2>

        <h3>4.1 Adapting to Market Regimes</h3>

        <p>
          I implemented an exponentially weighted scheme. This ensures that recent active returns influence the model much more than stale historical data. We define a span \(s\) and calculate the decay parameter as \(\alpha = 2/(s+1)\). Most programming libraries use this exact span convention.
        </p>

        <div class="eq">
          <div class="eq-title">Equation 4 EWMA mean and covariance</div>
          \[
            \omega_k = \frac{(1-\alpha)^k}{\sum_{j=0}^{T-1}(1-\alpha)^j},\quad
            \hat{\mu}_t = \sum_{k=0}^{T-1}\omega_k\,A_{t-k},\quad
            \hat{\Sigma}_t = \sum_{k=0}^{T-1}\omega_k\,(A_{t-k}-\hat{\mu}_t)(A_{t-k}-\hat{\mu}_t)^\top.
          \]
        </div>

        <h3>4.2 Using Shrinkage to Stabilize Covariance</h3>

        <p>
          Relying purely on sample covariance usually acts like a chaos generator during portfolio optimization. Even tiny estimation errors can trigger massive swings in your asset weights. Shrinkage provides a very reliable remedy for this issue. You basically blend a noisy covariance estimate with a highly structured target matrix. People often use a diagonal or constant correlation target. I went with a very conservative diagonal shrinkage approach here.
        </p>

        <div class="eq">
          <div class="eq-title">Equation 5 Diagonal shrinkage</div>
          \[
            \tilde{\Sigma}_t = (1-s)\hat{\Sigma}_t + s\,\mathrm{diag}(\hat{\Sigma}_t),
            \qquad s\in[0,1].
          \]
          <p style="margin:10px 0 0 0; font-size:0.95rem; opacity:0.8; font-family: var(--font-ui) !important;">
            The intuition behind this is quite simple. Shrinkage heavily reduces estimation error right where it hurts the optimizer the most. It simultaneously preserves enough structure so we do not pretend the assets are totally independent.
          </p>
        </div>

        <h2>5. Execution Constraints and Risk Limits</h2>

        <p>
          The feasible set \(\mathcal{W}\) guarantees we stay fully invested while strictly enforcing a maximum cap on any single asset.
        </p>

        <div class="eq">
          <div class="eq-title">Equation 6 Feasible set</div>
          \[
            \mathcal{W}=\Big\{w\in\mathbb{R}^N:\;\sum_{i=1}^N w_i = 1,\;\;0\le w_i\le c\Big\}.
          \]
        </div>

        <p>
          The model also incorporates a simple proportional transaction cost based strictly on portfolio turnover. We calculate the absolute change in weights and apply a cost multiplier \(\kappa\) at every rebalance. This simple step aggressively prevents the illusion of paper alpha that comes from excessive trading.
        </p>

        <div class="policy-box">
          <h4>Execution and Risk Controls</h4>
          <ul>
            <li>We rebalance monthly using the absolute last trading day of each calendar month.</li>
            <li>A strict per asset weight cap of 15 percent limits concentration and significantly reduces estimation driven cornering.</li>
            <li>Turnover costs are charged in basis points per unit of turnover to heavily penalize portfolio churning.</li>
            <li>A coverage filter automatically drops any assets showing too many missing returns during the training window.</li>
          </ul>
        </div>

        <h2>6. Validation by Fighting Data Leakage</h2>

        <p>
          Finding a perfectly unbiased validation method in finance simply does not happen in reality. You can however aggressively strip out the major known sources of bias. This means fighting look ahead errors and stopping leakage at your data split boundaries. You also must control performance inflation caused by running multiple tests.
        </p>

        <div class="policy-box">
          <h4>Leakage Resistant Validation Used</h4>
          <ul>
            <li>Walk forward testing ensures we train on a trailing window and apply those exact weights exclusively to future unseen days.</li>
            <li>An embargo day purposefully excludes the specific day right before rebalancing from our training set to block boundary leakage.</li>
            <li>Significance testing relies on methods aware of selection bias. We use Probabilistic and Deflated Sharpe Ratios to evaluate performance while adjusting for skewness and kurtosis and the dangers of multiple testing.</li>
            <li>We handle dependent data uncertainty by generating a stationary bootstrap confidence interval for the annualized Information Ratio.</li>
          </ul>
        </div>

        <h3>6.1 Correcting Claims for Researcher Bias</h3>

        <p>
          The Probabilistic Sharpe Ratio helps estimate the probability that our true performance exceeds a benchmark while accounting for non normal distributions and finite sample lengths. The Deflated Sharpe Ratio takes this a step further by adjusting the threshold for multiple testing and selection bias. If you try hundreds of strategies your best one is probably just pure statistical noise. I ran these diagnostics directly on the active returns so the final statistics align perfectly with our Information Ratio goals.
        </p>

        <h3>6.2 Bootstrap Methods for Uncertainty</h3>

        <p>
          Financial returns exhibit weak dependence which makes standard independent bootstrap confidence intervals far too optimistic. The stationary bootstrap fixes this by resampling blocks of random lengths drawn from a geometric distribution. This preserves short range dependence while still generating a strictly stationary pseudo series. I applied this technique to construct a rigorous 95 percent uncertainty interval around the annualized Information Ratio.
        </p>

        <h2>7. Empirical Output From the Recent Run</h2>

        <p>
          You can review the specific audit metrics reported by the recent backtest execution below. This run used strict walk forward testing with the transaction cost model fully enabled. Please treat these numbers simply as the output of one specific run rather than some universal law. Acknowledging that inherent uncertainty is the entire point of this exercise.
        </p>

        <div class="eq">
          <div class="eq-title">Backtest audit metrics</div>
          \[
          \begin{aligned}
          \text{CAGR (Portfolio)} &= 63.3654\%,\quad \text{CAGR (Benchmark)} = 49.4504\%\\
          \sigma_{\text{ann}}(\text{Portfolio}) &= 30.4660\%,\quad \sigma_{\text{ann}}(\text{Benchmark}) = 27.9692\%\\
          \text{Sharpe (Portfolio)} &= 1.7650,\quad \text{Sharpe (Benchmark)} = 1.5773\\
          \text{Tracking Error (Ann.)} &= 13.7237\%,\quad \text{Information Ratio (Ann.)} = 0.7036\\
          \text{IR 95\% CI} &= [-0.5191,\; 1.9841]\\
          \text{Max Drawdown (Portfolio)} &= -24.7214\%,\quad \text{Max Drawdown (Benchmark)} = -21.9586\%\\
          \text{Avg Turnover (monthly)} &= 1.0303\\
          \text{PSR on Active } (\mathrm{SR}^*>0) &= 1.0000,\quad \text{DSR on Active } (\mathrm{SR}^*>0) = 1.0000
          \end{aligned}
          \]
          <p style="margin:10px 0 0 0; font-size:0.95rem; opacity:0.8; font-family: var(--font-ui) !important;">
            Seeing a probability ratio reported as exactly one typically just means the value sits extremely close to one for that specific sample. Strong active returns certainly cause this. However seeing a perfect score should always trigger some immediate suspicion. You must carefully confirm that you did not implicitly optimize any hyperparameters on your evaluation data slice.
          </p>
        </div>

        <h2>8. Mathematical Improvements Over the Baseline</h2>

        <h3>8.1 Removing the Ratio Objective</h3>

        <p>
          The baseline concept involves maximizing a ratio of random variables that we can only ever estimate with significant error. My replacement objective utilizes a concave quadratic utility in \(w\) featuring explicit robustness guarantees. The new setup still generously rewards expected active returns while penalizing active risk. The adversary adds critical extra curvature to that penalty. This elegant trick keeps the monthly optimization incredibly stable under heavy estimation error. That is the exact spot where naive ratio maximization usually breaks down.
        </p>

        <h3>8.2 Enforcing the Existence of a Solution</h3>

        <div class="proof">
          <div class="proof-label">Proposition 2 Existence and stability</div>
          <p style="margin:0;">
            Given our specific parameter constraints and a convex compact set \(\mathcal{W}\) the reduced objective remains strictly concave in \(w\). This mathematically guarantees that a clear maximizing solution exists. The original two player formulation possesses a clear saddle point under these conditions. We interpret this wonderful property as a true Nash equilibrium.
          </p>
        </div>

        <h3>8.3 Quantifying Uncertainty Honestly</h3>

        <p>
          The calculated stationary bootstrap band looks remarkably wide on purpose. It honestly reflects the harsh reality that relatively short samples combined with dependent returns naturally produce massive uncertainty. A wide band is certainly not a bug in the code. It serves as the deeply honest error bar for the entire strategy.
        </p>

        <h2>9. Practical Limitations</h2>

        <ul>
          <li>Universe bias happens when you fix the asset list after the fact. Survivorship effects easily creep into the results. You should always prefer time consistent membership rules to avoid this.</li>
          <li>The basis point transaction costs serve merely as simplified placeholders. Real world costs invariably include bid ask spreads alongside market impact and strict liquidity constraints.</li>
          <li>Any hyperparameter search significantly inflates backtest metrics. You absolutely must use an effective number of trials in your diagnostics that honestly reflects how many variants you tested.</li>
          <li>Model risk remains a constant threat. The moving average inherently assumes one very specific decay structure. I strongly recommend stress testing different span lengths and tweaking the robustness parameter.</li>
        </ul>

        <p>
          The net result shows we did not just artificially discover alpha through backtest cleverness. I systematically replaced a highly fragile objective with a robust formulation grounded in game theory. I carefully controlled estimation error using covariance shrinkage. I demanded that our validation framework attack the strategy exactly like a real adversary would. That encompasses the entire philosophy of this project. You have to make the model violently earn its right to exist.
        </p>

        <h2>References</h2>
        <div class="refs">
          <ol>
            <li>
              Bailey D. H. and López de Prado M. 2014. <em>The Deflated Sharpe Ratio Correcting for Selection Bias Backtest Overfitting and Non Normality</em>.
              PDF <a href="https://www.davidhbailey.com/dhbpapers/deflated-sharpe.pdf" target="_blank" rel="noreferrer">davidhbailey.com</a>
            </li>
            <li>
              Ledoit O. and Wolf M. 2003 2004. <em>Honey I Shrunk the Sample Covariance Matrix</em>.
              PDF <a href="https://www.ledoit.net/honey.pdf" target="_blank" rel="noreferrer">ledoit.net</a>
            </li>
            <li>
              Ledoit O. 2020. <em>A Review and Guide to Covariance Matrix Estimation</em>.
              PDF <a href="https://www.ledoit.net/Review_Paper_2020_JFEc.pdf" target="_blank" rel="noreferrer">ledoit.net</a>
            </li>
            <li>
              Politis D. N. and Romano J. P. 1994. <em>The Stationary Bootstrap</em>.
              PDF copy <a href="https://www.ssc.wisc.edu/~bhansen/718/Politis%20Romano.pdf" target="_blank" rel="noreferrer">ssc.wisc.edu</a>
            </li>
            <li>
              Pandas Documentation <code>DataFrame.ewm</code> EWMA parameterization span com alpha.
              <a href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.ewm.html" target="_blank" rel="noreferrer">pandas.pydata.org</a>
            </li>
            <li>
              Lazard Asset Management 2019. <em>Its Time to Talk About Tracking Error</em> active risk as standard deviation of relative returns.
              PDF <a href="https://www.lazardassetmanagement.com/docs/89302/LazardLetter_ItsTimeToTalkAboutTrackingError_2019-08_en.pdf" target="_blank" rel="noreferrer">lazardassetmanagement.com</a>
            </li>
            <li>
              Investopedia <em>Information Ratio IR Definition Formula vs Sharpe Ratio</em>.
              <a href="https://www.investopedia.com/terms/i/informationratio.asp" target="_blank" rel="noreferrer">investopedia.com</a>
            </li>
            <li>
              Ferreira M. A. M. et al. 2012. <em>Minimax theorem and Nash equilibrium</em> overview connecting minimax and Nash.
              PDF <a href="https://www.um.edu.mt/library/oar/bitstream/123456789/68887/1/Minimax_theorem_and_nash_equilibrium.pdf" target="_blank" rel="noreferrer">um.edu.mt</a>
            </li>
          </ol>
        </div>
      </section>

      <section class="glass" aria-label="Footer">
        <footer>
          © <span id="yr"></span> Anıl Kaya Technical note on Nash Equilibrium robust active risk optimization
        </footer>
      </section>

    </div>
  </main>

  <script>
    (function(){
      "use strict";

      const brand = document.getElementById("brand");
      if(brand) {
          brand.addEventListener("click", () => { window.location.href = "#"; });
      }

      const LSKEY = "theme";
      const root = document.documentElement;
      const themeBtn = document.getElementById("theme");

      function applyTheme(theme, persist){
        root.setAttribute("data-theme", theme);
        if(persist) localStorage.setItem(LSKEY, theme);
        const isLight = (theme === "light");
        if(themeBtn) {
            themeBtn.setAttribute("aria-pressed", String(isLight));
            themeBtn.textContent = isLight ? "Dark" : "Light";
        }
        const meta = document.querySelector('meta[name="theme-color"]');
        if(meta) meta.setAttribute("content", isLight ? "#f4f4f6" : "#050505");
      }

      function getInitialTheme(){
        const saved = localStorage.getItem(LSKEY);
        if(saved === "light" || saved === "dark") return saved;
        return "dark"; // Defaulting to dark
      }

      applyTheme(getInitialTheme(), false);
      if(themeBtn) {
          themeBtn.addEventListener("click", () => {
            const now = (root.getAttribute("data-theme") === "light") ? "dark" : "light";
            applyTheme(now, true);
          });
      }

      const updateSpotlight = (e) => {
        const cards = document.querySelectorAll(".glass");
        cards.forEach(card => {
          const rect = card.getBoundingClientRect();
          const x = e.clientX - rect.left;
          const y = e.clientY - rect.top;
          card.style.setProperty("--mouse-x", x + "px");
          card.style.setProperty("--mouse-y", y + "px");
        });
      };
      document.addEventListener("mousemove", updateSpotlight, { passive: true });

      // Ultra-smooth Abstract Expand/Collapse logic
      const abstractContainer = document.getElementById("abstractContainer");
      const expandBtn = document.getElementById("expandBtn");
      
      if(expandBtn && abstractContainer) {
        expandBtn.addEventListener("click", () => {
          abstractContainer.classList.toggle("expanded");
          const isExpanded = abstractContainer.classList.contains("expanded");
          expandBtn.setAttribute("aria-expanded", isExpanded);
          expandBtn.querySelector(".btn-text").textContent = isExpanded ? "Show Less" : "Read Full Abstract";
        });
      }

      function renderMath(){
        if(!window.renderMathInElement) return;
        window.renderMathInElement(document.body, {
          delimiters: [
            { left: "$$", right: "$$", display: true },
            { left: "\\(", right: "\\)", display: false },
            { left: "\\[", right: "\\]", display: true }
          ]
        });
      }
      window.addEventListener("load", () => { setTimeout(renderMath, 50); });

      const yrSpan = document.getElementById("yr");
      if(yrSpan) yrSpan.textContent = new Date().getFullYear();
    })();
  </script>
</body>
</html>
